<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 <mapper namespace="data.mybatis.mapper.AdminMapper">
 	
 	<sql id="search">
	    <if test="keyword!=null and keyword!=''">
		   where j_company like '%'||#{keyword}||'%' and j_status=0
		</if>
    </sql>
 	
 	<!--  채용공고 승인 리스트 -->
 	<select id="appliedJobList" parameterType="hashmap" resultType="com.jhta.finalproject.jobvo.JobVo">
		select * from
		(
		   select b.*,rownum rnum
		   from (
		      select * from jobinfo      
		      <include refid="search"/>
		      order by j_num desc
		    )b
		) 
		<![CDATA[ where rnum>=#{startRow} and rnum<=#{endRow} ]]>
	</select>
 	
	<!-- 삭제 -->
	<delete id="delete" parameterType="int">
		delete from jobinfo where j_num=#{j_num}
	</delete>
	
	<!-- 공고승인 -->
	<update id="doConfirm" parameterType="com.jhta.finalproject.jobvo.JobVo">
		update jobinfo set j_status=1 
		where j_num=#{j_num}
	</update>
	
	<!-- 승인요청 갯수 -->
	<select id="getCount" resultType="int"  parameterType="hashmap">
     	select NVL(count(*),0) cnt from jobinfo where j_status=0
     	<include refid="search"/> 	
    </select>
	
 </mapper>
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 